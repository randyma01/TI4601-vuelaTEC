/* 1. Verificar información de check-in. */
 
/* 2. Consultar información de pasajeros. */

// filtro: por id de pasajero
db.passengers.aggregate([
    {
        $lookup:
        {
            from: 'tickets',
            localField: '_id',
            foreignField: 'passenger_id',
            as: 'ticketsInfo'
        }
    }
]).pretty()


/*  3. Ejecutar función de abordaje. */

// filtro: por id de pasajero y id del tickete
db.tickets.update(
    {
        '_id': 'ktl123',
        'passenger_id': 123454325,
    },
    {
        $set : {
            "used": true
        }
    }
).pretty()

/* 4. Ejecutar los siguientes reportes: */

    /* 4.1 Consultar información de un pasajero. */

    db.passengers.aggregate([
    {
       $match: 
        {
            _id: 123454325
        } 
    },
    {
        $lookup:
        {
            from: 'tickets',
            localField: '_id',
            foreignField: 'passenger_id',
            as: 'ticketsInfo'
        }
    }
    ]).pretty()
    

    /* 4.2 Vuelos registrados en el sistema: se muestra un listado con la 
    información de los vuelos registrados. Se puede filtrar por rango de fechas, 
    por estado, por nombre de pasajero. Para cada vuelo se debe mostrar el detalle. */

        /* 4.2.1 Listado de todos los vuelos en el sistema de manera general*/
        
        db.flights.find().pretty()
        
        /* 4.2.1 Listado de todos los vuelos en el sistema por fechas */

        /* 4.2.1 Listado de todos los vuelos en el sistema por nombre de estado */
         
         // filtro: en tiempo
         db.flights.find(
            {
                 "state": "On Time"
            }
         )

         // filtro: en atrasados
         db.flights.find(
            {
                 "state": "Delayed"
            }
         )

         // filtro: en cancelado
         db.flights.find(
            {
                 "state": "Cancel"
            }
         )

        /* 4.2.1 Listado de todos los vuelos en el sistema por nombre de pasajero */




      