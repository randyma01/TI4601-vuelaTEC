{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gusfc\\\\Documents\\\\GitHub\\\\TI4601-vuelaTEC\\\\app\\\\vuelatec\\\\src\\\\components\\\\Passenger\\\\Account\\\\index.js\";\nimport React from 'react';\nimport { Button, Col, Container, Form, Row, Table } from 'react-bootstrap';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport AddIcon from '@material-ui/icons/Add';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Fab from '@material-ui/core/Fab';\nimport IconButton from '@material-ui/core/IconButton';\nimport SimpleCrypto from 'simple-crypto-js';\nimport { Redirect } from 'react-router-dom';\n\nclass Account extends React.Component {\n  constructor(props) {\n    super(props);\n    this._isMounted = false;\n\n    this.componentDidMount = async () => {\n      this._isMounted = true;\n      await fetch(\"http://localhost:3000/passenger/myProfile/\".concat(this.state.dataUser._id), {\n        method: \"GET\"\n      }).then(response => response.json()).then(responseJson => {\n        if (responseJson !== '' && this._isMounted) {\n          this.setState({\n            dataUser: responseJson,\n            phones: responseJson.phone\n          });\n        }\n      }).catch(error => {\n        console.error(error);\n      });\n      const countries = await fetch('https://raw.githubusercontent.com/shivammathur/countrycity/master/data/geo.json', {\n        method: 'GET'\n      }).then(response => response.json()).then(responseJson => {\n        if (responseJson !== '' && this._isMounted) {\n          return Object.keys(responseJson).sort();\n        }\n      }).catch(error => {\n        console.error(error);\n      });\n      fetch('https://raw.githubusercontent.com/dr5hn/countries-states-cities-database/master/countries.json', {\n        method: \"GET\"\n      }).then(response => response.json()).then(responseJson => {\n        if (responseJson !== '' && this._isMounted) {\n          const tempCountries = [];\n          responseJson.forEach(element => {\n            if (countries.includes(element.name)) {\n              tempCountries.push(element);\n            }\n          });\n          this.setState({\n            listCountries: tempCountries\n          });\n        }\n      }).catch(error => {\n        console.error(error);\n      });\n    };\n\n    this._handleChangeSelectCountry = async event => {\n      const item = await JSON.parse(event.target.value.toString());\n      this.setState({\n        country: item[\"country\"],\n        codeCountry: item[\"code\"]\n      });\n      fetch('https://raw.githubusercontent.com/shivammathur/countrycity/master/data/geo.json', {\n        method: 'GET'\n      }).then(response => response.json()).then(responseJson => {\n        if (responseJson !== '') {\n          this.setState({\n            listCities: responseJson[this.state.country]\n          });\n        }\n      }).catch(error => {\n        console.error(error);\n      });\n    };\n\n    this._onClckAddPhone = () => {\n      if (this.state.phone !== '') {\n        this.setState({\n          phones: [...this.state.phones, this.state.phone],\n          phone: ''\n        });\n      }\n    };\n\n    this._onClickDeleteAccount = async () => {\n      let verify = window.confirm('Por favor confirme si desea borrar la cuenta');\n\n      if (verify) {\n        await fetch(\"http://localhost:3000/passenger/deleteProfile/\".concat(this.state.dataUser._id), {\n          method: \"DELETE\"\n        }).then(response => response.json()).then(responseJson => {\n          if (responseJson._id === this.state.dataUser._id) {\n            window.location = '/';\n            this.setState({\n              isDeleteAccount: true\n            });\n          }\n        }).catch(error => {\n          console.error(error);\n        });\n      } else {\n        this.setState({\n          isDeleteAccount: false\n        });\n      }\n    };\n\n    this._submitData = async () => {\n      if (this.state.country === '' || this.state.address === '') {\n        window.confirm(\"Debe seleccionar un pais y una ciudad.\");\n      } else if (this.state.firstName === '' || this.state.lastName === '') {\n        window.confirm(\"Debe ingresar nombre completo.\");\n      } else if (this.state.email === '') {\n        window.confirm(\"Debe ingresar un correo valido.\");\n      } else if (this.state.phones.length === 0) {\n        window.confirm(\"Debe ingresar al menos un numero telefonico.\");\n      } else if (this.state.password === '' || this.state.passwordConfirm === '') {\n        window.confirm(\"Debe ingresar una contraseña para crear la cuenta.\");\n      } else if (this.state.password !== this.state.passwordConfirm) {\n        window.confirm(\"La contraseña de confirmacion es incorrecta, valide.\");\n      } else {\n        const simpleCrypto = new SimpleCrypto('vtecAPP');\n        const passwordEncrypt = simpleCrypto.encrypt(this.state.password);\n        let data = {\n          address: this.state.address,\n          country: this.state.country,\n          email: this.state.email,\n          firstName: this.state.firstName,\n          lastName: this.state.lastName,\n          password: passwordEncrypt,\n          phone: this.state.phones\n        };\n        let result = await fetch(\"http://localhost:3000/passenger/editProfile/\".concat(this.state.dataUser._id), {\n          method: \"PUT\",\n          body: JSON.stringify(data),\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n\n        if (result.ok) {\n          window.confirm(\"Su informacion a sido actualizada correctamente\");\n        }\n      }\n    };\n\n    this.state = {\n      dataUser: props.dataUser,\n      isDeleteAccount: false,\n      address: '',\n      birthDay: '',\n      country: '',\n      email: '',\n      firstName: '',\n      id: '',\n      lastName: '',\n      listCities: [],\n      listCountries: [],\n      password: '',\n      passwordConfirm: '',\n      phone: '',\n      phones: [],\n      user: [],\n      userName: ''\n    };\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  _handleChangeEmail(event) {\n    this.setState({\n      email: event.target.value\n    });\n  }\n\n  _handleChangeFirstName(event) {\n    this.setState({\n      firstName: event.target.value\n    });\n  }\n\n  _handleChangeLastName(event) {\n    this.setState({\n      lastName: event.target.value\n    });\n  }\n\n  _handleChangePassword(event) {\n    this.setState({\n      password: event.target.value\n    });\n  }\n\n  _handleChangePasswordConfirm(event) {\n    this.setState({\n      passwordConfirm: event.target.value\n    });\n  }\n\n  _handleChangePhone(event) {\n    this.setState({\n      phone: event.target.value\n    });\n  }\n\n  _handleChangeSelectCity(event) {\n    this.setState({\n      address: event.target.value\n    });\n  }\n\n  _onClickDeletePhone(phone) {\n    this.setState(state => {\n      const tempPhones = state.phones.filter(item => item !== phone);\n      state.phones = tempPhones;\n      return {\n        tempPhones\n      };\n    });\n  }\n\n  render() {\n    if (this.state.isDeleteAccount) {\n      return React.createElement(Redirect, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      });\n    } else {\n      return React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          margin: '2%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        align: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, \"Perfil - Ver y Editar\")), React.createElement(Row, {\n        className: \"justify-content-md-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, React.createElement(Col, {\n        xs: true,\n        lg: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }), React.createElement(Col, {\n        md: \"auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, React.createElement(Form.Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        as: Col,\n        controlId: \"formGridName\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }, \"Nombre\"), React.createElement(Form.Control, {\n        type: \"name\",\n        placeholder: this.state.dataUser.firstName,\n        value: this.state.firstName,\n        onChange: this._handleChangeFirstName.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        as: Col,\n        controlId: \"formGridLastname\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }, \"Apellido\"), React.createElement(Form.Control, {\n        type: \"name\",\n        placeholder: this.state.dataUser.lastName,\n        value: this.state.lastName,\n        onChange: this._handleChangeLastName.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }))), React.createElement(Form.Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        as: Col,\n        controlId: \"formGridId\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, \"Identificaci\\xF3n\"), React.createElement(Form.Control, {\n        type: \"number\",\n        placeholder: this.state.dataUser._id,\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }))), React.createElement(Form.Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        as: Col,\n        controlId: \"formGridUsername\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, \"Usuario\"), React.createElement(Form.Control, {\n        type: \"string\",\n        placeholder: this.state.dataUser.username,\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      }))), React.createElement(Form.Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        as: Col,\n        controlId: \"formGridEmail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }, \"Correo electr\\xF3nico\"), React.createElement(Form.Control, {\n        type: \"email\",\n        placeholder: this.state.dataUser.email,\n        value: this.state.email,\n        onChange: this._handleChangeEmail.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }))), React.createElement(Form.Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        as: Col,\n        controlId: \"formGridPassword\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290\n        },\n        __self: this\n      }, \"Contrase\\xF1a\"), React.createElement(Form.Control, {\n        type: \"password\",\n        placeholder: \"Contrase\\xF1a\",\n        value: this.state.password,\n        onChange: this._handleChangePassword.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        as: Col,\n        controlId: \"formGridPasswordConfirm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }, \"Confirmar Contrase\\xF1a\"), React.createElement(Form.Control, {\n        type: \"password\",\n        placeholder: \"Contrase\\xF1a\",\n        value: this.state.passwordConfirm,\n        onChange: this._handleChangePasswordConfirm.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }))), React.createElement(Form.Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        as: Col,\n        controlId: \"formGridBirthDay\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302\n        },\n        __self: this\n      }, \"Fecha de Nacimiento\"), React.createElement(Form.Control, {\n        type: \"string\",\n        placeholder: this.state.dataUser.birthday,\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }))), React.createElement(Form.Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        as: Col,\n        controlId: \"ControlSelectCountry\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      }, \"Pa\\xEDs (\", this.state.dataUser.country, \")\"), React.createElement(Form.Control, {\n        as: \"select\",\n        onChange: this._handleChangeSelectCountry.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311\n        },\n        __self: this\n      }, this.state.listCountries.map((item, index) => React.createElement(\"option\", {\n        value: '{\"country\":\"' + item.name + '\", \"code\":\"' + item.phone_code + '\"}',\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313\n        },\n        __self: this\n      }, item.name)))), React.createElement(Form.Group, {\n        as: Col,\n        controlId: \"ControlSelectCity\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319\n        },\n        __self: this\n      }, \"Ciudad (\", this.state.dataUser.address, \")\"), React.createElement(Form.Control, {\n        as: \"select\",\n        value: this.state.address,\n        onChange: this._handleChangeSelectCity.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320\n        },\n        __self: this\n      }, this.state.listCities.map((item, key) => React.createElement(\"option\", {\n        key: key,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }, item))))), React.createElement(Form.Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        as: Col,\n        controlId: \"formGridNumber\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330\n        },\n        __self: this\n      }, \"N\\xFAmero de Telef\\xF3no\"), React.createElement(Form.Control, {\n        type: \"number\",\n        placeholder: \"Numero telefonico\",\n        value: this.state.phone,\n        onChange: this._handleChangePhone.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"formGridAddPhone\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334\n        },\n        __self: this\n      }, React.createElement(Fab, {\n        variant: \"extended\",\n        \"aria-label\": \"add\",\n        onClick: this._onClckAddPhone,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335\n        },\n        __self: this\n      }, React.createElement(AddIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336\n        },\n        __self: this\n      }), \"Agregar Numero\"), React.createElement(\"div\", {\n        style: {\n          overflow: 'auto',\n          height: '200px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339\n        },\n        __self: this\n      }, React.createElement(Table, {\n        striped: true,\n        bordered: true,\n        hover: true,\n        responsive: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343\n        },\n        __self: this\n      }, \"Telefono\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346\n        },\n        __self: this\n      }, this.state.phones.map((item, index) => React.createElement(\"tr\", {\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349\n        },\n        __self: this\n      }, item), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350\n        },\n        __self: this\n      }, React.createElement(IconButton, {\n        \"aria-label\": \"delete\",\n        style: {\n          color: 'red'\n        },\n        onClick: this._onClickDeletePhone.bind(this, item),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351\n        },\n        __self: this\n      }, React.createElement(DeleteIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352\n        },\n        __self: this\n      })))))))))))), React.createElement(Col, {\n        xs: true,\n        lg: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364\n        },\n        __self: this\n      })), React.createElement(Row, {\n        className: \"justify-content-md-center\",\n        style: {\n          margin: '3%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"success\",\n        type: \"submit\",\n        size: \"lg\",\n        onClick: this._submitData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369\n        },\n        __self: this\n      }, \"Aplicar Cambios\")), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 378\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: \"auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"danger\",\n        size: \"lg\",\n        onClick: this._onClickDeleteAccount,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 380\n        },\n        __self: this\n      }, \"Borrar Cuenta\")))));\n    }\n  }\n\n}\n\nexport default Account;","map":{"version":3,"sources":["C:/Users/gusfc/Documents/GitHub/TI4601-vuelaTEC/app/vuelatec/src/components/Passenger/Account/index.js"],"names":["React","Button","Col","Container","Form","Row","Table","AddIcon","DeleteIcon","Fab","IconButton","SimpleCrypto","Redirect","Account","Component","constructor","props","_isMounted","componentDidMount","fetch","state","dataUser","_id","method","then","response","json","responseJson","setState","phones","phone","catch","error","console","countries","Object","keys","sort","tempCountries","forEach","element","includes","name","push","listCountries","_handleChangeSelectCountry","event","item","JSON","parse","target","value","toString","country","codeCountry","listCities","_onClckAddPhone","_onClickDeleteAccount","verify","window","confirm","location","isDeleteAccount","_submitData","address","firstName","lastName","email","length","password","passwordConfirm","simpleCrypto","passwordEncrypt","encrypt","data","result","body","stringify","headers","ok","birthDay","id","user","userName","componentWillUnmount","_handleChangeEmail","_handleChangeFirstName","_handleChangeLastName","_handleChangePassword","_handleChangePasswordConfirm","_handleChangePhone","_handleChangeSelectCity","_onClickDeletePhone","tempPhones","filter","render","margin","bind","username","birthday","map","index","phone_code","key","overflow","height","color"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Button, Col, Container, Form, Row, Table } from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport SimpleCrypto from 'simple-crypto-js';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nclass Account extends React.Component {\r\n  _isMounted = false;\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      dataUser: props.dataUser,\r\n      isDeleteAccount: false,\r\n      address: '',\r\n      birthDay: '',\r\n      country: '',\r\n      email: '',\r\n      firstName: '',\r\n      id: '',\r\n      lastName: '',\r\n      listCities: [],\r\n      listCountries: [],\r\n      password: '',\r\n      passwordConfirm: '',\r\n      phone: '',\r\n      phones: [],\r\n      user: [],\r\n      userName: ''\r\n    };\r\n  }\r\n\r\n\r\n  componentDidMount = async () => {\r\n    this._isMounted = true;\r\n    await fetch(`http://localhost:3000/passenger/myProfile/${this.state.dataUser._id}`,\r\n      {\r\n        method: \"GET\"\r\n      })\r\n      .then(response => response.json())\r\n      .then(responseJson => {\r\n        if (responseJson !== '' && this._isMounted) {\r\n          this.setState({\r\n            dataUser: responseJson,\r\n            phones: responseJson.phone\r\n          });\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.error(error);\r\n      });\r\n\r\n    const countries = await fetch('https://raw.githubusercontent.com/shivammathur/countrycity/master/data/geo.json',\r\n      {\r\n        method: 'GET'\r\n      })\r\n      .then(response => response.json())\r\n      .then(responseJson => {\r\n        if (responseJson !== '' && this._isMounted) {\r\n          return Object.keys(responseJson).sort()\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.error(error);\r\n      });\r\n    fetch('https://raw.githubusercontent.com/dr5hn/countries-states-cities-database/master/countries.json',\r\n      {\r\n        method: \"GET\"\r\n      })\r\n      .then(response => response.json())\r\n      .then(responseJson => {\r\n        if (responseJson !== '' && this._isMounted) {\r\n          const tempCountries = []\r\n          responseJson.forEach(element => {\r\n            if (countries.includes(element.name)) {\r\n              tempCountries.push(element);\r\n            }\r\n          })\r\n          this.setState({\r\n            listCountries: tempCountries\r\n          });\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.error(error);\r\n      });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this._isMounted = false;\r\n  }\r\n\r\n\r\n  _handleChangeEmail(event) {\r\n    this.setState({ email: event.target.value })\r\n  }\r\n\r\n  _handleChangeFirstName(event) {\r\n    this.setState({ firstName: event.target.value })\r\n  }\r\n\r\n  _handleChangeLastName(event) {\r\n    this.setState({ lastName: event.target.value })\r\n  }\r\n\r\n  _handleChangePassword(event) {\r\n    this.setState({ password: event.target.value })\r\n  }\r\n\r\n  _handleChangePasswordConfirm(event) {\r\n    this.setState({ passwordConfirm: event.target.value })\r\n  }\r\n\r\n  _handleChangePhone(event) {\r\n    this.setState({ phone: event.target.value })\r\n  }\r\n\r\n  _handleChangeSelectCity(event) {\r\n    this.setState({ address: event.target.value })\r\n  }\r\n\r\n  _handleChangeSelectCountry = async (event) => {\r\n    const item = await JSON.parse(event.target.value.toString())\r\n    this.setState({\r\n      country: item[\"country\"],\r\n      codeCountry: item[\"code\"]\r\n    })\r\n    fetch('https://raw.githubusercontent.com/shivammathur/countrycity/master/data/geo.json',\r\n      {\r\n        method: 'GET'\r\n      })\r\n      .then(response => response.json())\r\n      .then(responseJson => {\r\n        if (responseJson !== '') {\r\n          this.setState({\r\n            listCities: responseJson[this.state.country]\r\n          })\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.error(error);\r\n      });\r\n  }\r\n\r\n\r\n  _onClckAddPhone = () => {\r\n    if (this.state.phone !== '') {\r\n      this.setState({\r\n        phones: [...this.state.phones, this.state.phone],\r\n        phone: ''\r\n      })\r\n    }\r\n  }\r\n\r\n  _onClickDeleteAccount = async () => {\r\n    let verify = window.confirm('Por favor confirme si desea borrar la cuenta');\r\n\r\n    if (verify) {\r\n      await fetch(`http://localhost:3000/passenger/deleteProfile/${this.state.dataUser._id}`,\r\n        {\r\n          method: \"DELETE\"\r\n        })\r\n        .then(response => response.json())\r\n        .then(responseJson => {\r\n          if (responseJson._id === this.state.dataUser._id) {\r\n            window.location = '/';\r\n            this.setState({\r\n              isDeleteAccount: true\r\n            })\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.error(error);\r\n        });\r\n    }\r\n    else {\r\n      this.setState({\r\n        isDeleteAccount: false\r\n      })\r\n    }\r\n  }\r\n  _onClickDeletePhone(phone) {\r\n    this.setState(state => {\r\n      const tempPhones = state.phones.filter(item => item !== phone);\r\n      state.phones = tempPhones;\r\n      return {\r\n        tempPhones\r\n      };\r\n    });\r\n  }\r\n\r\n  _submitData = async () => {\r\n    if (this.state.country === '' || this.state.address === '') {\r\n      window.confirm(\"Debe seleccionar un pais y una ciudad.\")\r\n    }\r\n    else if (this.state.firstName === '' || this.state.lastName === '') {\r\n      window.confirm(\"Debe ingresar nombre completo.\")\r\n    }\r\n    else if (this.state.email === '') {\r\n      window.confirm(\"Debe ingresar un correo valido.\")\r\n    }\r\n    else if (this.state.phones.length === 0) {\r\n      window.confirm(\"Debe ingresar al menos un numero telefonico.\")\r\n    }\r\n    else if (this.state.password === '' || this.state.passwordConfirm === '') {\r\n      window.confirm(\"Debe ingresar una contraseña para crear la cuenta.\")\r\n    }\r\n    else if (this.state.password !== this.state.passwordConfirm) {\r\n      window.confirm(\"La contraseña de confirmacion es incorrecta, valide.\")\r\n    }\r\n    else {\r\n      const simpleCrypto = new SimpleCrypto('vtecAPP');\r\n      const passwordEncrypt = simpleCrypto.encrypt(this.state.password);\r\n      let data = {\r\n        address: this.state.address,\r\n        country: this.state.country,\r\n        email: this.state.email,\r\n        firstName: this.state.firstName,\r\n        lastName: this.state.lastName,\r\n        password: passwordEncrypt,\r\n        phone: this.state.phones,\r\n      }\r\n      let result = await fetch(`http://localhost:3000/passenger/editProfile/${this.state.dataUser._id}`,\r\n        {\r\n          method: \"PUT\",\r\n          body: JSON.stringify(data),\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          }\r\n        });\r\n      if (result.ok) {\r\n        window.confirm(\"Su informacion a sido actualizada correctamente\");\r\n      }\r\n    }\r\n  };\r\n\r\n  render() {\r\n    if (this.state.isDeleteAccount) {\r\n      return (\r\n        <Redirect to=\"/login\" />\r\n      );\r\n    } else {\r\n      return (\r\n        <Container>\r\n          <div style={{ margin: '2%' }}>\r\n            <h4 align='center'>Perfil - Ver y Editar</h4>\r\n          </div>\r\n          <Row className='justify-content-md-center'>\r\n            <Col xs lg='2'></Col>\r\n            <Col md='auto'>\r\n              <Form>\r\n                <Form.Row>\r\n                  <Form.Group as={Col} controlId='formGridName'>\r\n                    <Form.Label>Nombre</Form.Label>\r\n                    <Form.Control type='name' placeholder={this.state.dataUser.firstName} value={this.state.firstName} onChange={this._handleChangeFirstName.bind(this)} />\r\n                  </Form.Group>\r\n\r\n                  <Form.Group as={Col} controlId='formGridLastname'>\r\n                    <Form.Label>Apellido</Form.Label>\r\n                    <Form.Control type='name' placeholder={this.state.dataUser.lastName} value={this.state.lastName} onChange={this._handleChangeLastName.bind(this)} />\r\n                  </Form.Group>\r\n                </Form.Row>\r\n\r\n                <Form.Row>\r\n                  <Form.Group as={Col} controlId='formGridId'>\r\n                    <Form.Label>Identificación</Form.Label>\r\n                    <Form.Control type='number' placeholder={this.state.dataUser._id} disabled />\r\n                  </Form.Group>\r\n                </Form.Row>\r\n\r\n                <Form.Row>\r\n                  <Form.Group as={Col} controlId='formGridUsername'>\r\n                    <Form.Label>Usuario</Form.Label>\r\n                    <Form.Control type='string' placeholder={this.state.dataUser.username} disabled />\r\n                  </Form.Group>\r\n                </Form.Row>\r\n\r\n                <Form.Row>\r\n                  <Form.Group as={Col} controlId='formGridEmail'>\r\n                    <Form.Label>Correo electrónico</Form.Label>\r\n                    <Form.Control type='email' placeholder={this.state.dataUser.email} value={this.state.email} onChange={this._handleChangeEmail.bind(this)} />\r\n                  </Form.Group>\r\n                </Form.Row>\r\n\r\n                <Form.Row>\r\n                  <Form.Group as={Col} controlId='formGridPassword'>\r\n                    <Form.Label>Contraseña</Form.Label>\r\n                    <Form.Control type='password' placeholder='Contraseña' value={this.state.password} onChange={this._handleChangePassword.bind(this)} />\r\n                  </Form.Group>\r\n\r\n                  <Form.Group as={Col} controlId='formGridPasswordConfirm'>\r\n                    <Form.Label>Confirmar Contraseña</Form.Label>\r\n                    <Form.Control type='password' placeholder='Contraseña' value={this.state.passwordConfirm} onChange={this._handleChangePasswordConfirm.bind(this)} />\r\n                  </Form.Group>\r\n                </Form.Row>\r\n\r\n                <Form.Row>\r\n                  <Form.Group as={Col} controlId='formGridBirthDay'>\r\n                    <Form.Label>Fecha de Nacimiento</Form.Label>\r\n                    <Form.Control type='string' placeholder={this.state.dataUser.birthday} disabled />\r\n                  </Form.Group>\r\n                </Form.Row>\r\n\r\n\r\n                <Form.Row>\r\n                  <Form.Group as={Col} controlId=\"ControlSelectCountry\">\r\n                    <Form.Label>País ({this.state.dataUser.country})</Form.Label>\r\n                    <Form.Control as=\"select\" onChange={this._handleChangeSelectCountry.bind(this)}>\r\n                      {this.state.listCountries.map((item, index) => (\r\n                        <option value={'{\"country\":\"' + item.name + '\", \"code\":\"' + item.phone_code + '\"}'} key={index} >{item.name}</option>\r\n                      ))}\r\n                    </Form.Control>\r\n                  </Form.Group>\r\n\r\n                  <Form.Group as={Col} controlId=\"ControlSelectCity\">\r\n                    <Form.Label>Ciudad ({this.state.dataUser.address})</Form.Label>\r\n                    <Form.Control as=\"select\" value={this.state.address} onChange={this._handleChangeSelectCity.bind(this)}>\r\n                      {this.state.listCities.map((item, key) => (\r\n                        <option key={key}>{item}</option>\r\n                      ))}\r\n                    </Form.Control>\r\n                  </Form.Group>\r\n                </Form.Row>\r\n\r\n                <Form.Row>\r\n                  <Form.Group as={Col} controlId='formGridNumber'>\r\n                    <Form.Label>Número de Telefóno</Form.Label>\r\n                    <Form.Control type='number' placeholder='Numero telefonico' value={this.state.phone} onChange={this._handleChangePhone.bind(this)} />\r\n                  </Form.Group>\r\n\r\n                  <Form.Group controlId='formGridAddPhone'>\r\n                    <Fab variant=\"extended\" aria-label=\"add\" onClick={this._onClckAddPhone}>\r\n                      <AddIcon />\r\n                      Agregar Numero\r\n                  </Fab>\r\n                    <div style={{ overflow: 'auto', height: '200px' }}>\r\n                      <Table striped bordered hover responsive >\r\n                        <thead>\r\n                          <tr>\r\n                            <th>Telefono</th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {this.state.phones.map((item, index) => (\r\n                            <tr key={index}>\r\n                              <td>{item}</td>\r\n                              <td>\r\n                                <IconButton aria-label=\"delete\" style={{ color: 'red' }} onClick={this._onClickDeletePhone.bind(this, item)}>\r\n                                  <DeleteIcon />\r\n                                </IconButton>\r\n                              </td>\r\n                            </tr>\r\n                          ))}\r\n                        </tbody>\r\n                      </Table>\r\n                    </div>\r\n                  </Form.Group>\r\n                </Form.Row>\r\n              </Form>\r\n            </Col>\r\n            <Col xs lg='2'></Col>\r\n          </Row>\r\n\r\n          <Row className='justify-content-md-center' style={{ margin: '3%' }}>\r\n            <div>\r\n              <Button\r\n                variant='success'\r\n                type='submit'\r\n                size='lg'\r\n                onClick={this._submitData}>\r\n                Aplicar Cambios\r\n            </Button>\r\n            </div>\r\n\r\n            <div>\r\n              <Col md='auto'>\r\n                <Button\r\n                  variant='danger'\r\n                  size='lg'\r\n                  onClick={this._onClickDeleteAccount}>\r\n                  Borrar Cuenta\r\n                </Button>\r\n              </Col>\r\n            </div>\r\n          </Row>\r\n        </Container>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default Account;\r\n"]},"metadata":{},"sourceType":"module"}