{"ast":null,"code":"import _taggedTemplateLiteral from \"C:\\\\Users\\\\gusfc\\\\Documents\\\\GitHub\\\\TI4601-vuelaTEC\\\\app\\\\vuelatec\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"C:\\\\Users\\\\gusfc\\\\Documents\\\\GitHub\\\\TI4601-vuelaTEC\\\\app\\\\vuelatec\\\\src\\\\components\\\\Passenger\\\\Flight\\\\Check-in\\\\index.js\";\n\nfunction _templateObject() {\n  const data = _taggedTemplateLiteral([\"\"]);\n\n  _templateObject = function () {\n    return data;\n  };\n\n  return data;\n}\n\nimport React from 'react';\nimport { Button, Col, Container, Form, Table } from 'react-bootstrap';\nimport 'bootstrap/dist/css/bootstrap.min.css'; //import Refresh from '@material-ui/icons/Refresh';\n\nimport CheckCircleOutlineIcon from '@material-ui/icons/CheckCircleOutline';\nimport IconButton from '@material-ui/core/IconButton';\n\nclass Flight extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this._onClickApplyCheckIn = async (ticketId, amountTickets, passenger) => {\n      let verify = window.confirm(\"Desea aplicar check-in al ticket con c\\xF3digo: \".concat(ticketId));\n\n      if (verify) {\n        //TODO Assign seats\n        let seatsTemp = [];\n        const chars = [...\"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"];\n\n        for (let i = 0; i < amountTickets; i++) {\n          let randomSeats = [...Array(1)].map(i => chars[Math.random() * chars.length | 0]).join(_templateObject());\n          let randomSeatsNumber = Math.floor(Math.random() * 100 + 1);\n          seatsTemp.push(randomSeats + randomSeatsNumber);\n        }\n\n        let data = {\n          ticketId: ticketId,\n          passengerId: passenger,\n          seats: seatsTemp\n        };\n        await fetch('http://localhost:3000/passenger/makeCheckIn/', {\n          method: \"PUT\",\n          body: JSON.stringify(data),\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        }).then(response => response.json()).then(responseJson => {\n          if (responseJson.ok === 1) {\n            window.confirm('Se aplico el abordaje correctamente para el ticket seleccionado');\n            this.setState({\n              ticketsToBeCheckin: []\n            });\n          }\n        }).catch(error => {\n          console.error(error);\n        });\n      }\n    };\n\n    this._onClickSearchFlight = async () => {\n      if (this.state.idFlight === '' || this.state.idPassenger === '') {\n        window.confirm(\"Debe ingresar parametros de busqueda.\");\n      } else if (parseInt(this.state.idPassenger) !== parseInt(this.state.dataUser._id)) {\n        window.confirm(\"La identificación del pasajero no concuerda con su cuenta, verifique.\");\n      } else {\n        this.setState({\n          ticketsToBeCheckin: []\n        });\n        let flightInfo = await fetch(\"http://localhost:3000/employee/findFlightsId/\".concat(this.state.idFlight), {\n          method: \"GET\"\n        }).then(response => response.json()).then(responseJson => {\n          return responseJson;\n        }).catch(error => {\n          console.error(error);\n        });\n        await fetch(\"http://localhost:3000/employee/passengerInfo/\".concat(this.state.idPassenger), {\n          method: \"GET\"\n        }).then(response => response.json()).then(responseJson => {\n          let passengerInfo = [];\n          passengerInfo = responseJson[0].ticketsInfo;\n          passengerInfo.forEach(element => {\n            if (element.flight_id === flightInfo._id) {\n              this.setState({\n                ticketsToBeCheckin: [...this.state.ticketsToBeCheckin, element],\n                idFlight: '',\n                idPassenger: ''\n              });\n            }\n          });\n        }).catch(error => {\n          console.error(error);\n        });\n      }\n    };\n\n    this.state = {\n      dataUser: props.dataUser,\n      flight: [],\n      idFlight: '',\n      idPassenger: '',\n      passenger: [],\n      ticketsToBeCheckin: []\n    };\n  }\n\n  _handleChangePassenger(event) {\n    this.setState({\n      idPassenger: event.target.value\n    });\n  }\n\n  _handleChangeFlight(event) {\n    this.setState({\n      idFlight: event.target.value\n    });\n  }\n\n  render() {\n    return React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        margin: '2%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"Check-in de Ticket\")), React.createElement(Form, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(Form.Row, {\n      style: {\n        marginTop: '2%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formGridPassenher\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(Form.Control, {\n      type: \"number\",\n      placeholder: \"Identificador de pasajero\",\n      value: this.state.idPassenger,\n      onChange: this._handleChangePassenger.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formGridFlight\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(Form.Control, {\n      type: \"string\",\n      placeholder: \"C\\xF3digo de vuelo\",\n      value: this.state.idFlight,\n      onChange: this._handleChangeFlight.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formGridButton\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this._onClickSearchFlight,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"Buscar\")))), React.createElement(Table, {\n      striped: true,\n      bordered: true,\n      hover: true,\n      responsive: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"C\\xF3digo Boleto\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, \"C\\xF3digo Vuelo\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"Identificaci\\xF3n Pasajero\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, \"Cantidad Boletos\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, \"Cantidad Maletas\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"Fecha Compra\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, \"Asientos\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \"Estado de Check-in\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, \"Aplicar Check-in\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, this.state.ticketsToBeCheckin.map((item, index) => React.createElement(\"tr\", {\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, item._id), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, item.flight_id), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, item.passenger_id), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, item.amount), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, item.bagagge), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, item.dateBought), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, JSON.stringify(item.seats)), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, item.checked ? 'Chequeado' : 'Sin chequear'), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(IconButton, {\n      \"aria-label\": \"apply\",\n      style: {\n        color: 'green'\n      },\n      onClick: this._onClickApplyCheckIn.bind(this, item._id, item.amount, item.passenger_id),\n      disabled: item.checked,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(CheckCircleOutlineIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }))))))));\n  }\n\n}\n\nexport default Flight;","map":{"version":3,"sources":["C:/Users/gusfc/Documents/GitHub/TI4601-vuelaTEC/app/vuelatec/src/components/Passenger/Flight/Check-in/index.js"],"names":["React","Button","Col","Container","Form","Table","CheckCircleOutlineIcon","IconButton","Flight","Component","constructor","props","_onClickApplyCheckIn","ticketId","amountTickets","passenger","verify","window","confirm","seatsTemp","chars","i","randomSeats","Array","map","Math","random","length","join","randomSeatsNumber","floor","push","data","passengerId","seats","fetch","method","body","JSON","stringify","headers","then","response","json","responseJson","ok","setState","ticketsToBeCheckin","catch","error","console","_onClickSearchFlight","state","idFlight","idPassenger","parseInt","dataUser","_id","flightInfo","passengerInfo","ticketsInfo","forEach","element","flight_id","flight","_handleChangePassenger","event","target","value","_handleChangeFlight","render","margin","marginTop","bind","item","index","passenger_id","amount","bagagge","dateBought","checked","color"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Button, Col, Container, Form, Table } from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n//import Refresh from '@material-ui/icons/Refresh';\r\nimport CheckCircleOutlineIcon from '@material-ui/icons/CheckCircleOutline';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nclass Flight extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      dataUser: props.dataUser,\r\n      flight: [],\r\n      idFlight: '',\r\n      idPassenger: '',\r\n      passenger: [],\r\n      ticketsToBeCheckin: []\r\n    };\r\n  }\r\n\r\n  _handleChangePassenger(event) {\r\n    this.setState({ idPassenger: event.target.value })\r\n  }\r\n\r\n  _handleChangeFlight(event) {\r\n    this.setState({ idFlight: event.target.value })\r\n  }\r\n\r\n  _onClickApplyCheckIn = async (ticketId, amountTickets, passenger) => {\r\n    let verify = window.confirm(`Desea aplicar check-in al ticket con código: ${ticketId}`);\r\n    if (verify) {\r\n      //TODO Assign seats\r\n      let seatsTemp = []\r\n      const chars = [...\"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"]\r\n      for (let i = 0; i < amountTickets; i++) {\r\n        let randomSeats = [...Array(1)].map(i => chars[Math.random() * chars.length | 0]).join``;\r\n        let randomSeatsNumber = Math.floor((Math.random() * 100) + 1);\r\n        seatsTemp.push(randomSeats + randomSeatsNumber)\r\n      }\r\n      let data = {\r\n        ticketId: ticketId,\r\n        passengerId: passenger,\r\n        seats: seatsTemp\r\n      }\r\n      await fetch('http://localhost:3000/passenger/makeCheckIn/',\r\n        {\r\n          method: \"PUT\",\r\n          body: JSON.stringify(data),\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          }\r\n        })\r\n        .then(response => response.json())\r\n        .then(responseJson => {\r\n          if (responseJson.ok === 1) {\r\n            window.confirm('Se aplico el abordaje correctamente para el ticket seleccionado');\r\n            this.setState({ ticketsToBeCheckin: [] })\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.error(error);\r\n        });\r\n    }\r\n  };\r\n\r\n  _onClickSearchFlight = async () => {\r\n    if (this.state.idFlight === '' || this.state.idPassenger === '') {\r\n      window.confirm(\"Debe ingresar parametros de busqueda.\")\r\n    }\r\n    else if (parseInt(this.state.idPassenger) !== parseInt(this.state.dataUser._id)) {\r\n      window.confirm(\"La identificación del pasajero no concuerda con su cuenta, verifique.\")\r\n    }\r\n    else {\r\n      this.setState({\r\n        ticketsToBeCheckin: []\r\n      })\r\n      let flightInfo = await fetch(`http://localhost:3000/employee/findFlightsId/${this.state.idFlight}`,\r\n        {\r\n          method: \"GET\"\r\n        })\r\n        .then(response => response.json())\r\n        .then(responseJson => {\r\n          return responseJson;\r\n        })\r\n        .catch(error => {\r\n          console.error(error);\r\n        });\r\n\r\n      await fetch(`http://localhost:3000/employee/passengerInfo/${this.state.idPassenger}`,\r\n        {\r\n          method: \"GET\"\r\n        })\r\n        .then(response => response.json())\r\n        .then(responseJson => {\r\n          let passengerInfo = [];\r\n          passengerInfo = responseJson[0].ticketsInfo;\r\n          passengerInfo.forEach(element => {\r\n            if (element.flight_id === flightInfo._id) {\r\n              this.setState({\r\n                ticketsToBeCheckin: [...this.state.ticketsToBeCheckin, element],\r\n                idFlight: '', idPassenger: ''\r\n              })\r\n            }\r\n          });\r\n        })\r\n        .catch(error => {\r\n          console.error(error);\r\n        });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Container>\r\n        <div style={{ margin: '2%' }}>\r\n          <h3 align='center'>Check-in de Ticket</h3>\r\n        </div>\r\n        <Form>\r\n          <Form.Row style={{ marginTop: '2%' }}>\r\n            <Form.Group as={Col} controlId='formGridPassenher'>\r\n              <Form.Control type='number' placeholder='Identificador de pasajero' value={this.state.idPassenger} onChange={this._handleChangePassenger.bind(this)} />\r\n            </Form.Group>\r\n            <Form.Group as={Col} controlId='formGridFlight'>\r\n              <Form.Control type='string' placeholder='Código de vuelo' value={this.state.idFlight} onChange={this._handleChangeFlight.bind(this)} />\r\n            </Form.Group>\r\n            <Form.Group as={Col} controlId='formGridButton'>\r\n              <Button onClick={this._onClickSearchFlight}>Buscar</Button>\r\n            </Form.Group>\r\n          </Form.Row>\r\n        </Form>\r\n        <Table striped bordered hover responsive >\r\n          <thead>\r\n            <tr>\r\n              <th>Código Boleto</th>\r\n              <th>Código Vuelo</th>\r\n              <th>Identificación Pasajero</th>\r\n              <th>Cantidad Boletos</th>\r\n              <th>Cantidad Maletas</th>\r\n              <th>Fecha Compra</th>\r\n              <th>Asientos</th>\r\n              <th>Estado de Check-in</th>\r\n              <th>Aplicar Check-in</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {this.state.ticketsToBeCheckin.map((item, index) => (\r\n              <tr key={index}>\r\n                <td>{item._id}</td>\r\n                <td>{item.flight_id}</td>\r\n                <td>{item.passenger_id}</td>\r\n                <td>{item.amount}</td>\r\n                <td>{item.bagagge}</td>\r\n                <td>{item.dateBought}</td>\r\n                <td>{JSON.stringify(item.seats)}</td>\r\n                <td>{item.checked ? ('Chequeado') : 'Sin chequear'}</td>\r\n                <td>\r\n                  <IconButton aria-label=\"apply\" style={{ color: 'green' }} onClick={this._onClickApplyCheckIn.bind(this, item._id, item.amount, item.passenger_id)} disabled={item.checked}>\r\n                    <CheckCircleOutlineIcon />\r\n                  </IconButton>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </Table>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default Flight;\r\n"]},"metadata":{},"sourceType":"module"}