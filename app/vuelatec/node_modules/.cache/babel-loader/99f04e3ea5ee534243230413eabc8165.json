{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gusfc\\\\Documents\\\\GitHub\\\\TI4601-vuelaTEC\\\\app\\\\vuelatec\\\\src\\\\components\\\\Administrator\\\\Airline\\\\Update\\\\index.js\";\nimport React from 'react';\nimport { Button, Col, Container, Form, Row, Table } from 'react-bootstrap';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport AddIcon from '@material-ui/icons/Add';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Fab from '@material-ui/core/Fab';\nimport IconButton from '@material-ui/core/IconButton';\n\nclass Airline extends React.Component {\n  constructor(props) {\n    super(props);\n    this._isMounted = false;\n\n    this.componentDidMount = async () => {\n      this._isMounted = true;\n      const countries = await fetch('https://raw.githubusercontent.com/shivammathur/countrycity/master/data/geo.json', {\n        method: 'GET'\n      }).then(response => response.json()).then(responseJson => {\n        if (responseJson !== '' && this._isMounted) {\n          return Object.keys(responseJson).sort();\n        }\n      }).catch(error => {\n        console.error(error);\n      });\n      await fetch('https://raw.githubusercontent.com/dr5hn/countries-states-cities-database/master/countries.json', {\n        method: \"GET\"\n      }).then(response => response.json()).then(responseJson => {\n        if (responseJson !== '' && this._isMounted) {\n          const tempCountries = [];\n          responseJson.forEach(element => {\n            if (countries.includes(element.name)) {\n              tempCountries.push(element);\n            }\n          });\n          this.setState({\n            listCountries: tempCountries\n          });\n        }\n      }).catch(error => {\n        console.error(error);\n      });\n    };\n\n    this._handleChangeSelectCountry = async event => {\n      this.setState({\n        country: event.target.value\n      });\n    };\n\n    this._onClckAddCountries = () => {\n      if (this.state.country !== '') {\n        this.setState({\n          countries: [...this.state.countries, this.state.country],\n          country: ''\n        });\n      }\n    };\n\n    this._onClickSearchAirline = async () => {\n      if (this.state.code === '') {\n        window.confirm(\"Debe ingresar un código de aerolinea para modificar.\");\n      } else {\n        await fetch(\"http://localhost:3000/admin/findAirlinesId/\".concat(this.state.code), {\n          method: \"GET\"\n        }).then(response => response.json()).then(responseJson => {\n          if (responseJson !== '') {\n            this.setState({\n              airline: responseJson,\n              countries: responseJson.countries,\n              code: ''\n            });\n          }\n        }).catch(error => {\n          console.error(error);\n        });\n      }\n    };\n\n    this._submitData = async () => {\n      if (this.state.name === '') {\n        window.confirm(\"Debe Ingresar un nombre de aerolinea.\");\n      } else if (this.state.countries.length === 0) {\n        window.confirm(\"Debe ingresar al menos un pais donde realizará vuelos.\");\n      } else {\n        let data = {\n          name: this.state.name,\n          countries: this.state.countries\n        };\n        await fetch(\"http://localhost:3000/admin/updateAirlines/\".concat(this.state.code), {\n          method: \"PUT\",\n          body: JSON.stringify(data),\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        }).then(response => response.json()).then(responseJson => {\n          if (responseJson.name === this.state.name) {\n            this.setState({\n              name: '',\n              countries: [],\n              airport: '',\n              code: ''\n            });\n            window.confirm(\"Se actualizado correctamente la aerolinea.\");\n          }\n        }).catch(error => {\n          console.error(error);\n        });\n      }\n    };\n\n    this.state = {\n      airline: [],\n      code: '',\n      countries: [],\n      country: '',\n      listCountries: [],\n      name: ''\n    };\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  _handleChangeCode(event) {\n    this.setState({\n      code: event.target.value\n    });\n  }\n\n  _handleChangeName(event) {\n    this.setState({\n      name: event.target.value\n    });\n  }\n\n  _onClickDeleteCountry(country) {\n    this.setState(state => {\n      const tempCountries = state.countries.filter(item => item !== country);\n      state.countries = tempCountries;\n      return {\n        tempCountries\n      };\n    });\n  }\n\n  render() {\n    return React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        margin: '2%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, \"Actualizar Aerolinea\")), React.createElement(Row, {\n      className: \"justify-content-md-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: true,\n      lg: \"2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }), React.createElement(Col, {\n      md: \"auto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(Form, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(Form.Row, {\n      style: {\n        marginTop: '2%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formGridCodeSearch\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"C\\xF3digo\"), React.createElement(Form.Control, {\n      type: \"string\",\n      placeholder: \"C\\xF3digo de aerolinea modificar\",\n      value: this.state.code,\n      onChange: this._handleChangeCode.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formGridButton\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this._onClickSearchAirline,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, \"Buscar\")))), React.createElement(Form, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(Form.Row, {\n      style: {\n        marginTop: '2%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formGridCode\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, \"C\\xF3digo\"), React.createElement(Form.Control, {\n      type: \"string\",\n      placeholder: this.state.airline._id,\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }))), React.createElement(Form.Row, {\n      style: {\n        marginTop: '2%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formGridName\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, \"Nombre\"), React.createElement(Form.Control, {\n      type: \"string\",\n      placeholder: this.state.airline.name,\n      value: this.state.name,\n      onChange: this._handleChangeName.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }))), React.createElement(Form.Row, {\n      style: {\n        marginTop: '2%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"ControlSelectAirport\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, \"Aeropuerto de operaci\\xF3n\"), React.createElement(Form.Control, {\n      type: \"string\",\n      placeholder: this.state.airline.airport_id,\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }))), React.createElement(Form.Row, {\n      style: {\n        marginTop: '2%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"ControlSelectCountries\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, \"Paises\"), React.createElement(Form.Control, {\n      as: \"select\",\n      defaultValue: 'DEFAULT',\n      onChange: this._handleChangeSelectCountry.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: 'DEFAULT',\n      disabled: true,\n      hidden: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, \"Seleccionar los paises de operaci\\xF3n\"), this.state.listCountries.map((item, key) => React.createElement(\"option\", {\n      value: item.name,\n      key: key,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, item.name)))), React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formGridAddCountry\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, React.createElement(Fab, {\n      variant: \"extended\",\n      \"aria-label\": \"add\",\n      onClick: this._onClckAddCountries,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, React.createElement(AddIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }), \"Agregar Pa\\xEDs\"))), React.createElement(\"div\", {\n      style: {\n        overflow: 'auto',\n        height: '200px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, React.createElement(Table, {\n      striped: true,\n      bordered: true,\n      hover: true,\n      responsive: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, \"Pa\\xEDs\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, this.state.countries.map((item, index) => React.createElement(\"tr\", {\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, item), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(IconButton, {\n      \"aria-label\": \"delete\",\n      style: {\n        color: 'red'\n      },\n      onClick: this._onClickDeleteCountry.bind(this, item),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, React.createElement(DeleteIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    })))))))))), React.createElement(Col, {\n      xs: true,\n      lg: \"2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    })), React.createElement(Row, {\n      className: \"justify-content-md-center\",\n      style: {\n        margin: '3%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"primary\",\n      size: \"lg\",\n      onClick: this._submitData,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, \"Confirmar\")));\n  }\n\n}\n\nexport default Airline;","map":{"version":3,"sources":["C:/Users/gusfc/Documents/GitHub/TI4601-vuelaTEC/app/vuelatec/src/components/Administrator/Airline/Update/index.js"],"names":["React","Button","Col","Container","Form","Row","Table","AddIcon","DeleteIcon","Fab","IconButton","Airline","Component","constructor","props","_isMounted","componentDidMount","countries","fetch","method","then","response","json","responseJson","Object","keys","sort","catch","error","console","tempCountries","forEach","element","includes","name","push","setState","listCountries","_handleChangeSelectCountry","event","country","target","value","_onClckAddCountries","state","_onClickSearchAirline","code","window","confirm","airline","_submitData","length","data","body","JSON","stringify","headers","airport","componentWillUnmount","_handleChangeCode","_handleChangeName","_onClickDeleteCountry","filter","item","render","margin","marginTop","bind","_id","airport_id","map","key","overflow","height","index","color"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Button, Col, Container, Form, Row, Table } from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nclass Airline extends React.Component {\r\n  _isMounted = false;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      airline: [],\r\n      code: '',\r\n      countries: [],\r\n      country: '',\r\n      listCountries: [],\r\n      name: ''\r\n    };\r\n  }\r\n\r\n  componentDidMount = async () => {\r\n    this._isMounted = true;\r\n    const countries = await fetch('https://raw.githubusercontent.com/shivammathur/countrycity/master/data/geo.json',\r\n      {\r\n        method: 'GET'\r\n      })\r\n      .then(response => response.json())\r\n      .then(responseJson => {\r\n        if (responseJson !== '' && this._isMounted) {\r\n          return Object.keys(responseJson).sort()\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.error(error);\r\n      });\r\n    await fetch('https://raw.githubusercontent.com/dr5hn/countries-states-cities-database/master/countries.json',\r\n      {\r\n        method: \"GET\"\r\n      })\r\n      .then(response => response.json())\r\n      .then(responseJson => {\r\n        if (responseJson !== ''&& this._isMounted) {\r\n          const tempCountries = []\r\n          responseJson.forEach(element => {\r\n            if (countries.includes(element.name)) {\r\n              tempCountries.push(element);\r\n            }\r\n          })\r\n          this.setState({\r\n            listCountries: tempCountries\r\n          });\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.error(error);\r\n      });\r\n  }\r\n  \r\n  componentWillUnmount() {\r\n    this._isMounted = false;\r\n  }\r\n\r\n  _handleChangeCode(event) {\r\n    this.setState({ code: event.target.value })\r\n  }\r\n\r\n  _handleChangeName(event) {\r\n    this.setState({ name: event.target.value })\r\n  }\r\n\r\n  _handleChangeSelectCountry = async (event) => {\r\n    this.setState({\r\n      country: event.target.value\r\n    })\r\n  }\r\n\r\n  _onClckAddCountries = () => {\r\n    if (this.state.country !== '') {\r\n      this.setState({\r\n        countries: [...this.state.countries, this.state.country],\r\n        country: ''\r\n      })\r\n    }\r\n  }\r\n\r\n  _onClickDeleteCountry(country) {\r\n    this.setState(state => {\r\n      const tempCountries = state.countries.filter(item => item !== country);\r\n      state.countries = tempCountries;\r\n      return {\r\n        tempCountries\r\n      };\r\n    });\r\n  }\r\n\r\n  _onClickSearchAirline = async () => {\r\n    if (this.state.code === '') {\r\n      window.confirm(\"Debe ingresar un código de aerolinea para modificar.\")\r\n    } else {\r\n      await fetch(`http://localhost:3000/admin/findAirlinesId/${this.state.code}`,\r\n        {\r\n          method: \"GET\"\r\n        })\r\n        .then(response => response.json())\r\n        .then(responseJson => {\r\n          if (responseJson !== '') {\r\n            this.setState({\r\n              airline: responseJson,\r\n              countries: responseJson.countries,\r\n              code: ''\r\n            });\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.error(error);\r\n        });\r\n    }\r\n  }\r\n\r\n  _submitData = async () => {\r\n    if (this.state.name === '') {\r\n      window.confirm(\"Debe Ingresar un nombre de aerolinea.\")\r\n    }\r\n    else if (this.state.countries.length === 0) {\r\n      window.confirm(\"Debe ingresar al menos un pais donde realizará vuelos.\")\r\n    }\r\n    else {\r\n      let data = {\r\n        name: this.state.name,\r\n        countries: this.state.countries\r\n      }\r\n      await fetch(`http://localhost:3000/admin/updateAirlines/${this.state.code}`,\r\n        {\r\n          method: \"PUT\",\r\n          body: JSON.stringify(data),\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          }\r\n        })\r\n        .then(response => response.json())\r\n        .then(responseJson => {\r\n          if (responseJson.name === this.state.name) {\r\n            this.setState({ name: '', countries: [], airport: '', code: '' })\r\n            window.confirm(\"Se actualizado correctamente la aerolinea.\")\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.error(error);\r\n        });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Container>\r\n        <div style={{ margin: '2%' }}>\r\n          <h3 align='center'>Actualizar Aerolinea</h3>\r\n        </div>\r\n        <Row className='justify-content-md-center'>\r\n          <Col xs lg='2'></Col>\r\n          <Col md='auto'>\r\n            <Form>\r\n              <Form.Row style={{ marginTop: '2%' }}>\r\n                <Form.Group as={Col} controlId='formGridCodeSearch'>\r\n                  <Form.Label>Código</Form.Label>\r\n                  <Form.Control type='string' placeholder='Código de aerolinea modificar' value={this.state.code} onChange={this._handleChangeCode.bind(this)} />\r\n                </Form.Group>\r\n                <Form.Group as={Col} controlId='formGridButton'>\r\n                  <Button onClick={this._onClickSearchAirline}>Buscar</Button>\r\n                </Form.Group>\r\n              </Form.Row>\r\n            </Form>\r\n            <Form>\r\n              <Form.Row style={{ marginTop: '2%' }}>\r\n                <Form.Group as={Col} controlId='formGridCode'>\r\n                  <Form.Label>Código</Form.Label>\r\n                  <Form.Control type='string' placeholder={this.state.airline._id} disabled />\r\n                </Form.Group>\r\n              </Form.Row>\r\n\r\n              <Form.Row style={{ marginTop: '2%' }}>\r\n                <Form.Group as={Col} controlId='formGridName'>\r\n                  <Form.Label>Nombre</Form.Label>\r\n                  <Form.Control type='string' placeholder={this.state.airline.name} value={this.state.name} onChange={this._handleChangeName.bind(this)} />\r\n                </Form.Group>\r\n              </Form.Row>\r\n\r\n              <Form.Row style={{ marginTop: '2%' }}>\r\n                <Form.Group as={Col} controlId=\"ControlSelectAirport\">\r\n                  <Form.Label>Aeropuerto de operación</Form.Label>\r\n                  <Form.Control type='string' placeholder={this.state.airline.airport_id} disabled />\r\n                </Form.Group>\r\n              </Form.Row>\r\n              <Form.Row style={{ marginTop: '2%' }}>\r\n                <Form.Group as={Col} controlId=\"ControlSelectCountries\">\r\n                  <Form.Label>Paises</Form.Label>\r\n                  <Form.Control as=\"select\" defaultValue={'DEFAULT'} onChange={this._handleChangeSelectCountry.bind(this)}>\r\n                    <option value={'DEFAULT'} disabled hidden>Seleccionar los paises de operación</option>\r\n                    {this.state.listCountries.map((item, key) => (\r\n                      <option value={item.name} key={key}>{item.name}</option>\r\n                    ))}\r\n                  </Form.Control>\r\n                </Form.Group>\r\n                <Form.Group as={Col} controlId='formGridAddCountry'>\r\n                  <Fab variant=\"extended\" aria-label=\"add\" onClick={this._onClckAddCountries}>\r\n                    <AddIcon />\r\n                    Agregar País\r\n                </Fab>\r\n                </Form.Group>\r\n              </Form.Row>\r\n              <div style={{ overflow: 'auto', height: '200px' }}>\r\n                <Table striped bordered hover responsive >\r\n                  <thead>\r\n                    <tr>\r\n                      <th>País</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {this.state.countries.map((item, index) => (\r\n                      <tr key={index}>\r\n                        <td>{item}</td>\r\n                        <td>\r\n                          <IconButton aria-label=\"delete\" style={{ color: 'red' }} onClick={this._onClickDeleteCountry.bind(this, item)}>\r\n                            <DeleteIcon />\r\n                          </IconButton>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </Table>\r\n              </div>\r\n            </Form>\r\n          </Col>\r\n          <Col xs lg='2'></Col>\r\n        </Row>\r\n\r\n        <Row className='justify-content-md-center' style={{ margin: '3%' }}>\r\n          <Button\r\n            variant='primary'\r\n            size='lg'\r\n            onClick={this._submitData}\r\n          >\r\n            Confirmar\r\n            </Button>\r\n        </Row>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default Airline;\r\n"]},"metadata":{},"sourceType":"module"}