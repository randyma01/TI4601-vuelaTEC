{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gusfc\\\\Documents\\\\GitHub\\\\TI4601-vuelaTEC\\\\app\\\\vuelatec\\\\src\\\\components\\\\session\\\\login.js\";\nimport React from 'react';\nimport { Form, Button, Container, Col, Row } from 'react-bootstrap';\nimport Menu from '../menu';\nimport SignUp from './signup';\nimport Logo from '../../images/iconVuelaTEC.jpg';\nimport SimpleCrypto from 'simple-crypto-js';\n\nclass LogIn extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this._onSearchUser = event => {\n      this.setState({\n        userName: event.target.value\n      });\n    };\n\n    this._onSearchPasswordUser = event => {\n      this.setState({\n        password: event.target.value\n      });\n    };\n\n    this._onSignUpPressed = () => {\n      this.setState({\n        isCreateAccount: true\n      });\n    };\n\n    this._submitData = async () => {\n      if (this.state.password === '' || this.state.userName === '') {\n        this.setState({\n          messageError: 'Debe ingresar nombre de usuario y contraseña.'\n        });\n      } else if ((await this._verifyData()) === 0) {\n        this.setState({\n          isLoading: true,\n          messageError: ''\n        });\n      } else {\n        this.setState({\n          messageError: 'El nombre de usuario o contraseña son invalidos, por favor verifique.'\n        });\n      }\n    };\n\n    this._verifyData = async () => {\n      const simpleCrypto = new SimpleCrypto('vtecAPP');\n      let data = {\n        username: this.state.userName\n      };\n      return await fetch('http://localhost:3000/login/', {\n        method: \"POST\",\n        body: JSON.stringify(data),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(response => response.json()).then(responseJson => {\n        if (responseJson !== '') {\n          let passwordDecrypt = simpleCrypto.decrypt(responseJson[0].password);\n          this.setState({\n            dataUser: responseJson[0]\n          });\n          return this.state.password.localeCompare(passwordDecrypt);\n        }\n      }).catch(error => {\n        console.error(error);\n      });\n    };\n\n    this.state = {\n      isLoading: false,\n      isCreateAccount: false,\n      userName: '',\n      password: '',\n      dataUser: [],\n      messageError: ''\n    };\n  }\n\n  render() {\n    if (this.state.isLoading) {\n      return React.createElement(Menu, {\n        dataUser: this.state.dataUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      });\n    } else if (this.state.isCreateAccount) {\n      return React.createElement(SignUp, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      });\n    } else {\n      return React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          margin: '4%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        style: {\n          marginLeft: '20%'\n        },\n        src: Logo,\n        alt: \"logo.png\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      })), React.createElement(Row, {\n        className: \"justify-content-md-center\",\n        style: {\n          marginTop: '3%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: \"auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        controlId: \"formBasicUser\",\n        style: {\n          marginTop: '3%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, \"Usuario\"), React.createElement(Form.Control, {\n        type: \"string\",\n        placeholder: \"Nombre de usuario\",\n        onChange: this._onSearchUser,\n        value: this.state.userName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"formBasicPassword\",\n        style: {\n          marginTop: '3%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, \"Contrase\\xF1a\"), React.createElement(Form.Control, {\n        type: \"password\",\n        placeholder: \"Contrase\\xF1a\",\n        onChange: this._onSearchPasswordUser,\n        value: this.state.password,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }))))), React.createElement(Row, {\n        className: \"justify-content-md-center\",\n        style: {\n          margin: '2%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        style: {\n          color: 'red'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, this.state.messageError))), React.createElement(Row, {\n        className: \"justify-content-md-center\",\n        style: {\n          marginTop: '3%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"primary\",\n        size: \"lg\",\n        type: \"submit\",\n        onClick: this._submitData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \"Ingresar\")), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: \"auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"primary\",\n        size: \"lg\",\n        onClick: this._onSignUpPressed,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, \"Crear Cuenta\")))));\n    }\n  }\n\n}\n\nexport default LogIn;","map":{"version":3,"sources":["C:/Users/gusfc/Documents/GitHub/TI4601-vuelaTEC/app/vuelatec/src/components/session/login.js"],"names":["React","Form","Button","Container","Col","Row","Menu","SignUp","Logo","SimpleCrypto","LogIn","Component","constructor","props","_onSearchUser","event","setState","userName","target","value","_onSearchPasswordUser","password","_onSignUpPressed","isCreateAccount","_submitData","state","messageError","_verifyData","isLoading","simpleCrypto","data","username","fetch","method","body","JSON","stringify","headers","then","response","json","responseJson","passwordDecrypt","decrypt","dataUser","localeCompare","catch","error","console","render","margin","marginLeft","marginTop","color"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Form, Button, Container, Col, Row } from 'react-bootstrap';\r\n\r\nimport Menu from '../menu';\r\nimport SignUp from './signup';\r\nimport Logo from '../../images/iconVuelaTEC.jpg';\r\nimport SimpleCrypto from 'simple-crypto-js';\r\n\r\nclass LogIn extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isLoading: false,\r\n      isCreateAccount: false,\r\n      userName: '',\r\n      password: '',\r\n      dataUser: [],\r\n      messageError: ''\r\n    };\r\n\r\n  }\r\n\r\n  _onSearchUser = event => {\r\n    this.setState({\r\n      userName: event.target.value\r\n    });\r\n  };\r\n\r\n  _onSearchPasswordUser = event => {\r\n    this.setState({\r\n      password: event.target.value\r\n    });\r\n  };\r\n\r\n  _onSignUpPressed = () => {\r\n    this.setState({ isCreateAccount: true })\r\n  };\r\n\r\n  _submitData = async () => {\r\n    if (this.state.password === '' || this.state.userName === '') {\r\n      this.setState({\r\n        messageError: 'Debe ingresar nombre de usuario y contraseña.'\r\n      })\r\n    }\r\n    else if (await this._verifyData() === 0) {\r\n      this.setState({\r\n        isLoading: true,\r\n        messageError: ''\r\n      });\r\n    }\r\n    else {\r\n      this.setState({\r\n        messageError: 'El nombre de usuario o contraseña son invalidos, por favor verifique.'\r\n      })\r\n    }\r\n  };\r\n\r\n  _verifyData = async () => {\r\n    const simpleCrypto = new SimpleCrypto('vtecAPP');\r\n    let data = {\r\n      username: this.state.userName\r\n    }\r\n    return await fetch('http://localhost:3000/login/',\r\n      {\r\n        method: \"POST\",\r\n        body: JSON.stringify(data),\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      })\r\n      .then(response => response.json())\r\n      .then(responseJson => {\r\n        if (responseJson !== '') {\r\n          let passwordDecrypt = simpleCrypto.decrypt(responseJson[0].password);\r\n          this.setState({\r\n            dataUser: responseJson[0]\r\n          })\r\n          return this.state.password.localeCompare(passwordDecrypt);\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.error(error);\r\n      });\r\n  }\r\n\r\n  render() {\r\n    if (this.state.isLoading) {\r\n      return (\r\n        <Menu dataUser={this.state.dataUser} />\r\n      );\r\n    }\r\n    else if (this.state.isCreateAccount) {\r\n      return (\r\n        <SignUp />\r\n      )\r\n    }\r\n    else {\r\n      return (\r\n        <Container>\r\n          <div style={{ margin: '4%' }}>\r\n            <img style={{ marginLeft: '20%' }} src={Logo} alt=\"logo.png\"></img>\r\n          </div>\r\n          <Row className='justify-content-md-center' style={{ marginTop: '3%' }}>\r\n            <Col md='auto'>\r\n              <Form>\r\n                <Form.Group controlId='formBasicUser' style={{ marginTop: '3%' }}>\r\n                  <Form.Label>Usuario</Form.Label>\r\n                  <Form.Control\r\n                    type='string'\r\n                    placeholder='Nombre de usuario'\r\n                    onChange={this._onSearchUser}\r\n                    value={this.state.userName}\r\n                  />\r\n                </Form.Group>\r\n                <Form.Group controlId='formBasicPassword' style={{ marginTop: '3%' }}>\r\n                  <Form.Label>Contraseña</Form.Label>\r\n                  <Form.Control\r\n                    type='password'\r\n                    placeholder='Contraseña'\r\n                    onChange={this._onSearchPasswordUser}\r\n                    value={this.state.password}\r\n                  />\r\n                </Form.Group>\r\n              </Form>\r\n            </Col>\r\n          </Row>\r\n          <Row className='justify-content-md-center' style={{ margin: '2%' }}>\r\n            <div>\r\n              <p style={{ color: 'red' }}>{this.state.messageError}</p>\r\n            </div>\r\n          </Row>\r\n          <Row className='justify-content-md-center' style={{ marginTop: '3%' }}>\r\n            <div >\r\n              <Button\r\n                variant='primary'\r\n                size='lg'\r\n                type='submit'\r\n                onClick={this._submitData}\r\n              >\r\n                Ingresar\r\n            </Button>\r\n            </div>\r\n\r\n            <div>\r\n              <Col md='auto'>\r\n                <Button\r\n                  variant='primary'\r\n                  size='lg'\r\n                  onClick={this._onSignUpPressed}\r\n                >\r\n                  Crear Cuenta\r\n              </Button>\r\n              </Col>\r\n            </div>\r\n          </Row>\r\n        </Container>\r\n      );\r\n    }\r\n  }\r\n}\r\nexport default LogIn;\r\n"]},"metadata":{},"sourceType":"module"}