{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gusfc\\\\Documents\\\\GitHub\\\\TI4601-vuelaTEC\\\\app\\\\vuelatec\\\\src\\\\components\\\\Administrator\\\\Airline\\\\index.js\";\nimport React from 'react';\nimport { Button, Col, Container, Form, Row, Tab, Tabs } from 'react-bootstrap';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport AddIcon from '@material-ui/icons/Add';\nimport Fab from '@material-ui/core/Fab';\n/*Tabs*/\n\nimport DeleteAirline from './Delete';\nimport ReadAirline from './Read';\nimport UpdateAirline from './Update';\n\nclass Airline extends React.Component {\n  constructor(props) {\n    super(props);\n    this._isMounted = false;\n\n    this.componentDidMount = async () => {\n      this._isMounted = true;\n      const countries = await fetch('https://raw.githubusercontent.com/shivammathur/countrycity/master/data/geo.json', {\n        method: 'GET'\n      }).then(response => response.json()).then(responseJson => {\n        if (responseJson !== '' && this._isMounted) {\n          return Object.keys(responseJson).sort();\n        }\n      }).catch(error => {\n        console.error(error);\n      });\n      await fetch('https://raw.githubusercontent.com/dr5hn/countries-states-cities-database/master/countries.json', {\n        method: \"GET\"\n      }).then(response => response.json()).then(responseJson => {\n        if (responseJson !== '' && this._isMounted) {\n          const tempCountries = [];\n          responseJson.forEach(element => {\n            if (countries.includes(element.name)) {\n              tempCountries.push(element);\n            }\n          });\n          this.setState({\n            listCountries: tempCountries\n          });\n        }\n      }).catch(error => {\n        console.error(error);\n      });\n      await fetch('http://localhost:3000/admin/findAllAirports/', {\n        method: \"GET\"\n      }).then(response => response.json()).then(responseJson => {\n        if (responseJson !== '' && this._isMounted) {\n          this.setState({\n            listAirports: responseJson\n          });\n        }\n      }).catch(error => {\n        console.error(error);\n      });\n    };\n\n    this._handleChangeSelectCountry = async event => {\n      this.setState({\n        country: event.target.value\n      });\n    };\n\n    this._onClckAddCountries = () => {\n      if (this.state.country !== '') {\n        this.setState({\n          countries: [...this.state.countries, this.state.country],\n          country: ''\n        });\n      }\n    };\n\n    this._submitData = async () => {\n      if (this.state.name === '') {\n        window.confirm(\"Debe Ingresar un nombre de aerolinea.\");\n      } else if (this.state.airport === '') {\n        window.confirm(\"Debe indicar el aeropuerto de operación.\");\n      } else if (this.state.countries.length === 0) {\n        window.confirm(\"Debe ingresar al menos un pais donde realizará vuelos.\");\n      } else {\n        let data = {\n          _id: this.state.code,\n          name: this.state.name,\n          countries: this.state.countries,\n          airport_id: this.state.airport\n        };\n        await fetch('http://localhost:3000/admin/newAirline/', {\n          method: \"POST\",\n          body: JSON.stringify(data),\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        }).then(response => response.json()).then(responseJson => {\n          if (responseJson.name === this.state.name) {\n            this.setState({\n              name: '',\n              countries: [],\n              airport: '',\n              code: ''\n            });\n            window.confirm(\"Se agregado correctamente la nueva aerolinea.\");\n          }\n        }).catch(error => {\n          console.error(error);\n        });\n      }\n    };\n\n    this.state = {\n      airport: '',\n      code: '',\n      countries: [],\n      country: '',\n      listAirports: [],\n      listCountries: [],\n      name: ''\n    };\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  _handleChangeCode(event) {\n    this.setState({\n      code: event.target.value\n    });\n  }\n\n  _handleChangeName(event) {\n    this.setState({\n      name: event.target.value\n    });\n  }\n\n  _handleChangeSelectAirport(event) {\n    this.setState({\n      airport: event.target.value\n    });\n  }\n\n  render() {\n    return React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(Tabs, {\n      defaultActiveKey: \"create\",\n      id: \"uncontrolled-tab-example\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(Tab, {\n      eventKey: \"create\",\n      title: \"C\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        margin: '2%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, \"Agregar Aerolinea\")), React.createElement(Row, {\n      className: \"justify-content-md-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: true,\n      lg: \"2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }), React.createElement(Col, {\n      md: \"auto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(Form, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(Form.Row, {\n      style: {\n        marginTop: '2%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formGridName\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, \"C\\xF3digo\"), React.createElement(Form.Control, {\n      type: \"string\",\n      placeholder: \"C\\xF3digo de aerolinea\",\n      value: this.state.code,\n      onChange: this._handleChangeCode.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }))), React.createElement(Form.Row, {\n      style: {\n        marginTop: '2%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formGridName\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, \"Nombre\"), React.createElement(Form.Control, {\n      type: \"string\",\n      placeholder: \"Nombre\",\n      value: this.state.name,\n      onChange: this._handleChangeName.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }))), React.createElement(Form.Row, {\n      style: {\n        marginTop: '2%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"ControlSelectAirport\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, \"Aeropuerto de operaci\\xF3n\"), React.createElement(Form.Control, {\n      as: \"select\",\n      defaultValue: 'DEFAULT',\n      onChange: this._handleChangeSelectAirport.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: 'DEFAULT',\n      disabled: true,\n      hidden: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, \"Seleccionar un aeropuerto\"), this.state.listAirports.map((item, index) => React.createElement(\"option\", {\n      value: item._id,\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, \"(\", item._id, \") \", item.name))))), React.createElement(Form.Row, {\n      style: {\n        marginTop: '2%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"ControlSelectCountries\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, \"Paises\"), React.createElement(Form.Control, {\n      as: \"select\",\n      defaultValue: 'DEFAULT',\n      onChange: this._handleChangeSelectCountry.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: 'DEFAULT',\n      disabled: true,\n      hidden: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, \"Seleccionar los paises de operaci\\xF3n\"), this.state.listCountries.map((item, key) => React.createElement(\"option\", {\n      value: item.name,\n      key: key,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, item.name)))), React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formGridAddCountry\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(Fab, {\n      variant: \"extended\",\n      \"aria-label\": \"add\",\n      onClick: this._onClckAddCountries,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(AddIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }), \"Agregar Pa\\xEDs\"))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, \"Lista de paises a realizar vuelos:\"), this.state.countries.map((item, key) => React.createElement(\"p\", {\n      style: {\n        margin: '2%'\n      },\n      key: key,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, item))))), React.createElement(Col, {\n      xs: true,\n      lg: \"2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    })), React.createElement(Row, {\n      className: \"justify-content-md-center\",\n      style: {\n        margin: '3%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"primary\",\n      size: \"lg\",\n      onClick: this._submitData,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, \"Confirmar\"))), React.createElement(Tab, {\n      eventKey: \"read\",\n      title: \"R\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(ReadAirline, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    })), React.createElement(Tab, {\n      eventKey: \"update\",\n      title: \"U\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, React.createElement(UpdateAirline, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    })), React.createElement(Tab, {\n      eventKey: \"delete\",\n      title: \"D\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, React.createElement(DeleteAirline, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default Airline;","map":{"version":3,"sources":["C:/Users/gusfc/Documents/GitHub/TI4601-vuelaTEC/app/vuelatec/src/components/Administrator/Airline/index.js"],"names":["React","Button","Col","Container","Form","Row","Tab","Tabs","AddIcon","Fab","DeleteAirline","ReadAirline","UpdateAirline","Airline","Component","constructor","props","_isMounted","componentDidMount","countries","fetch","method","then","response","json","responseJson","Object","keys","sort","catch","error","console","tempCountries","forEach","element","includes","name","push","setState","listCountries","listAirports","_handleChangeSelectCountry","event","country","target","value","_onClckAddCountries","state","_submitData","window","confirm","airport","length","data","_id","code","airport_id","body","JSON","stringify","headers","componentWillUnmount","_handleChangeCode","_handleChangeName","_handleChangeSelectAirport","render","margin","marginTop","bind","map","item","index","key"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Button, Col, Container, Form, Row, Tab, Tabs } from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Fab from '@material-ui/core/Fab';\r\n\r\n/*Tabs*/\r\nimport DeleteAirline from './Delete';\r\nimport ReadAirline from './Read';\r\nimport UpdateAirline from './Update';\r\n\r\nclass Airline extends React.Component {\r\n  _isMounted = false;\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      airport: '',\r\n      code: '',\r\n      countries: [],\r\n      country: '',\r\n      listAirports: [],\r\n      listCountries: [],\r\n      name: ''\r\n    };\r\n  }\r\n\r\n  componentDidMount = async () => {\r\n    this._isMounted = true;\r\n    const countries = await fetch('https://raw.githubusercontent.com/shivammathur/countrycity/master/data/geo.json',\r\n      {\r\n        method: 'GET'\r\n      })\r\n      .then(response => response.json())\r\n      .then(responseJson => {\r\n        if (responseJson !== '' && this._isMounted) {\r\n          return Object.keys(responseJson).sort()\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.error(error);\r\n      });\r\n    await fetch('https://raw.githubusercontent.com/dr5hn/countries-states-cities-database/master/countries.json',\r\n      {\r\n        method: \"GET\"\r\n      })\r\n      .then(response => response.json())\r\n      .then(responseJson => {\r\n        if (responseJson !== '' && this._isMounted) {\r\n          const tempCountries = []\r\n          responseJson.forEach(element => {\r\n            if (countries.includes(element.name)) {\r\n              tempCountries.push(element);\r\n            }\r\n          })\r\n          this.setState({\r\n            listCountries: tempCountries\r\n          });\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.error(error);\r\n      });\r\n\r\n    await fetch('http://localhost:3000/admin/findAllAirports/',\r\n      {\r\n        method: \"GET\"\r\n      })\r\n      .then(response => response.json())\r\n      .then(responseJson => {\r\n        if (responseJson !== '' && this._isMounted) {\r\n          this.setState({\r\n            listAirports: responseJson\r\n          });\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.error(error);\r\n      });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this._isMounted = false;\r\n  }\r\n\r\n  _handleChangeCode(event) {\r\n    this.setState({ code: event.target.value })\r\n  }\r\n\r\n  _handleChangeName(event) {\r\n    this.setState({ name: event.target.value })\r\n  }\r\n\r\n  _handleChangeSelectAirport(event) {\r\n    this.setState({ airport: event.target.value })\r\n  }\r\n\r\n  _handleChangeSelectCountry = async (event) => {\r\n    this.setState({\r\n      country: event.target.value\r\n    })\r\n  }\r\n\r\n  _onClckAddCountries = () => {\r\n    if (this.state.country !== '') {\r\n      this.setState({\r\n        countries: [...this.state.countries, this.state.country],\r\n        country: ''\r\n      })\r\n    }\r\n  }\r\n\r\n  _submitData = async () => {\r\n    if (this.state.name === '') {\r\n      window.confirm(\"Debe Ingresar un nombre de aerolinea.\")\r\n    }\r\n    else if (this.state.airport === '') {\r\n      window.confirm(\"Debe indicar el aeropuerto de operación.\")\r\n    }\r\n    else if (this.state.countries.length === 0) {\r\n      window.confirm(\"Debe ingresar al menos un pais donde realizará vuelos.\")\r\n    }\r\n    else {\r\n      let data = {\r\n        _id: this.state.code,\r\n        name: this.state.name,\r\n        countries: this.state.countries,\r\n        airport_id: this.state.airport\r\n      }\r\n      await fetch('http://localhost:3000/admin/newAirline/',\r\n        {\r\n          method: \"POST\",\r\n          body: JSON.stringify(data),\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          }\r\n        })\r\n        .then(response => response.json())\r\n        .then(responseJson => {\r\n          if (responseJson.name === this.state.name) {\r\n            this.setState({ name: '', countries: [], airport: '', code: '' })\r\n            window.confirm(\"Se agregado correctamente la nueva aerolinea.\")\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.error(error);\r\n        });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Container>\r\n        <Tabs defaultActiveKey=\"create\" id=\"uncontrolled-tab-example\">\r\n          <Tab eventKey=\"create\" title=\"C\">\r\n            <div style={{ margin: '2%' }}>\r\n              <h3 align='center'>Agregar Aerolinea</h3>\r\n            </div>\r\n            <Row className='justify-content-md-center'>\r\n              <Col xs lg='2'></Col>\r\n              <Col md='auto'>\r\n                <Form>\r\n                  <Form.Row style={{ marginTop: '2%' }}>\r\n                    <Form.Group as={Col} controlId='formGridName'>\r\n                      <Form.Label>Código</Form.Label>\r\n                      <Form.Control type='string' placeholder='Código de aerolinea' value={this.state.code} onChange={this._handleChangeCode.bind(this)} />\r\n                    </Form.Group>\r\n                  </Form.Row>\r\n\r\n                  <Form.Row style={{ marginTop: '2%' }}>\r\n                    <Form.Group as={Col} controlId='formGridName'>\r\n                      <Form.Label>Nombre</Form.Label>\r\n                      <Form.Control type='string' placeholder='Nombre' value={this.state.name} onChange={this._handleChangeName.bind(this)} />\r\n                    </Form.Group>\r\n                  </Form.Row>\r\n\r\n                  <Form.Row style={{ marginTop: '2%' }}>\r\n                    <Form.Group as={Col} controlId=\"ControlSelectAirport\">\r\n                      <Form.Label>Aeropuerto de operación</Form.Label>\r\n                      <Form.Control as=\"select\" defaultValue={'DEFAULT'} onChange={this._handleChangeSelectAirport.bind(this)}>\r\n                        <option value={'DEFAULT'} disabled hidden>Seleccionar un aeropuerto</option>\r\n                        {this.state.listAirports.map((item, index) => (\r\n                          <option value={item._id} key={index}>({item._id}) {item.name}</option>\r\n                        ))}\r\n                      </Form.Control>\r\n                    </Form.Group>\r\n                  </Form.Row>\r\n                  <Form.Row style={{ marginTop: '2%' }}>\r\n                    <Form.Group as={Col} controlId=\"ControlSelectCountries\">\r\n                      <Form.Label>Paises</Form.Label>\r\n                      <Form.Control as=\"select\" defaultValue={'DEFAULT'} onChange={this._handleChangeSelectCountry.bind(this)}>\r\n                        <option value={'DEFAULT'} disabled hidden>Seleccionar los paises de operación</option>\r\n                        {this.state.listCountries.map((item, key) => (\r\n                          <option value={item.name} key={key}>{item.name}</option>\r\n                        ))}\r\n                      </Form.Control>\r\n                    </Form.Group>\r\n                    <Form.Group as={Col} controlId='formGridAddCountry'>\r\n                      <Fab variant=\"extended\" aria-label=\"add\" onClick={this._onClckAddCountries}>\r\n                        <AddIcon />\r\n                        Agregar País\r\n                  </Fab>\r\n                    </Form.Group>\r\n                  </Form.Row>\r\n                  <div>\r\n                    <p>Lista de paises a realizar vuelos:</p>\r\n                    {this.state.countries.map((item, key) => (\r\n                      <p style={{ margin: '2%' }} key={key}>{item}</p>\r\n                    ))}\r\n                  </div>\r\n                </Form>\r\n              </Col>\r\n              <Col xs lg='2'></Col>\r\n            </Row>\r\n\r\n            <Row className='justify-content-md-center' style={{ margin: '3%' }}>\r\n              <Button\r\n                variant='primary'\r\n                size='lg'\r\n                onClick={this._submitData}\r\n              >\r\n                Confirmar\r\n              </Button>\r\n            </Row>\r\n          </Tab>\r\n          <Tab eventKey=\"read\" title=\"R\">\r\n            <ReadAirline />\r\n          </Tab>\r\n          <Tab eventKey=\"update\" title=\"U\" >\r\n            <UpdateAirline />\r\n          </Tab>\r\n          <Tab eventKey=\"delete\" title=\"D\" >\r\n            <DeleteAirline />\r\n          </Tab>\r\n        </Tabs>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default Airline;\r\n"]},"metadata":{},"sourceType":"module"}